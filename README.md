# Suqya Water Management System

نظام إدارة المياه "سقيا" - منصة شاملة لإدارة محطات المياه والشاحنات والسائقين مع نظام عزل المؤسسات

## 🚰 نظرة عامة

Suqya هو نظام إدارة متكامل مصمم خصيصاً لإدارة عمليات توزيع المياه. يوفر النظام إدارة شاملة للمحطات والشاحنات والسائقين مع نظام عزل بيانات متقدم يضمن خصوصية وأمان بيانات كل مؤسسة.

## ✨ المميزات الرئيسية

### 🏢 إدارة المؤسسات
- **نظام عزل البيانات**: كل مؤسسة ترى فقط بياناتها
- **إدارة متعددة المستخدمين**: مالك المؤسسة، المندوبين، السائقين
- **لوحة تحكم شاملة**: إحصائيات وإدارة مركزية

### 🚛 إدارة الشاحنات
- **إضافة وتعديل الشاحنات**: إدارة كاملة لأسطول الشاحنات
- **تعيين السائقين**: ربط السائقين بالشاحنات
- **تتبع الحالة**: نشط، غير نشط، صيانة
- **إدارة الصيانة**: جدولة وتتبع الصيانة

### 👨‍💼 إدارة السائقين
- **نظام السائقين المتاحين**: سائقين غير معينين لأي مؤسسة
- **تعيين السائقين**: ربط السائقين بالمؤسسات
- **إدارة الشاحنات**: تعيين الشاحنات للسائقين
- **معلومات مفصلة**: بيانات الاتصال والمدينة

### 🏪 إدارة المحطات
- **إدارة المحطات**: إضافة وتعديل وحذف المحطات
- **تتبع الحالة**: نشط، غير نشط، صيانة
- **معلومات الاتصال**: شخص الاتصال ورقم الهاتف
- **السعة والموقع**: تفاصيل شاملة لكل محطة

### 👥 إدارة المندوبين
- **إدارة المندوبين**: إضافة وتعديل وحذف المندوبين
- **تفعيل/تعطيل**: إدارة حالة المندوبين
- **تتبع النشاط**: آخر نشاط للمندوبين
- **إحصائيات**: عدد المحطات والطلبات

## 🛠️ التقنيات المستخدمة

- **Backend**: Laravel 10.x
- **Frontend**: Blade Templates, CSS3, JavaScript
- **Database**: MySQL
- **Authentication**: Laravel Breeze
- **Middleware**: Custom Role & Institution Access Control

## 📋 متطلبات النظام

- PHP >= 8.1
- Composer
- MySQL >= 8.0
- Node.js & NPM (للأصول الأمامية)

## 🚀 التثبيت والإعداد

### 1. استنساخ المشروع
```bash
git clone https://github.com/yourusername/suqya-2.git
cd suqya-2
```

### 2. تثبيت التبعيات
```bash
composer install
npm install
```

### 3. إعداد البيئة
```bash
cp .env.example .env
php artisan key:generate
```

### 4. إعداد قاعدة البيانات
```bash
# تعديل ملف .env بمعلومات قاعدة البيانات
php artisan migrate
php artisan db:seed
```

### 5. تشغيل المشروع
```bash
php artisan serve
npm run dev
```

## 🗄️ هيكل قاعدة البيانات

### الجداول الرئيسية:
- **users**: المستخدمين (مالك المؤسسة، المندوبين، السائقين)
- **trucks**: الشاحنات
- **stations**: محطات المياه
- **water_requests**: طلبات المياه
- **distribution_points**: نقاط التوزيع

### العلاقات:
- كل مؤسسة لها سائقين وشاحنات ومحطات خاصة بها
- السائقين يمكن تعيينهم للشاحنات
- المندوبين يديرون المحطات

## 🔐 نظام الأمان

### الأدوار والصلاحيات:
- **org_owner**: مالك المؤسسة - صلاحيات كاملة
- **representative**: المندوب - إدارة المحطات والطلبات
- **driver**: السائق - عرض المهام المعينة

### عزل المؤسسات:
- كل مؤسسة ترى فقط بياناتها
- middleware مخصص للتحكم في الوصول
- فحص institution_id في جميع الاستعلامات

## 📱 الواجهات الرئيسية

### لوحة تحكم المؤسسة:
- إحصائيات شاملة
- إدارة السائقين والشاحنات
- إدارة المحطات والمندوبين
- التقارير والإعدادات

### لوحة تحكم السائق:
- عرض المهام المعينة
- تحديث حالة المهام
- معلومات الشاحنة

### لوحة تحكم المندوب:
- إدارة المحطات
- متابعة الطلبات
- التقارير

## 🔧 الإعدادات المتقدمة

### إعداد Middleware:
```php
// التحقق من دور المستخدم
Route::middleware(['auth', 'checkrole:org_owner'])->group(function () {
    // routes للمؤسسة
});

// التحقق من الوصول للمؤسسة
Route::middleware(['auth', 'institution.access'])->group(function () {
    // routes محمية
});
```

### إضافة مؤسسة جديدة:
```php
// إنشاء مستخدم جديد مع role = 'org_owner'
User::create([
    'name' => 'اسم المؤسسة',
    'email' => 'institution@example.com',
    'password' => bcrypt('password'),
    'role' => 'org_owner',
    'institution_id' => null // سيصبح هو المؤسسة
]);
```

## 📊 الإحصائيات والتقارير

- عدد المحطات النشطة
- عدد الشاحنات والسائقين
- معدل الاستخدام
- تقارير الأداء

## 🤝 المساهمة

نرحب بالمساهمات! يرجى اتباع الخطوات التالية:

1. Fork المشروع
2. إنشاء branch جديد (`git checkout -b feature/AmazingFeature`)
3. Commit التغييرات (`git commit -m 'Add some AmazingFeature'`)
4. Push إلى Branch (`git push origin feature/AmazingFeature`)
5. فتح Pull Request

## 📄 الرخصة

هذا المشروع مرخص تحت رخصة MIT - انظر ملف [LICENSE](LICENSE) للتفاصيل.

## 📞 الدعم

للدعم والاستفسارات:
- 📧 البريد الإلكتروني: support@suqya.com
- 🐛 الإبلاغ عن الأخطاء: [Issues](https://github.com/yourusername/suqya-2/issues)

## 🙏 الشكر

شكراً لجميع المساهمين والمطورين الذين ساعدوا في تطوير هذا النظام.

---

**Suqya Water Management System** - نظام إدارة المياه المتكامل 🚰✨
